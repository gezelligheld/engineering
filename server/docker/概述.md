#### 环境配置的难题

软件开发最大的麻烦事之一，就是环境配置，要想从根本上解决问题，安装的时候需要把原始环境一模一样地复制过来

虚拟机就是带环境安装的一种解决方案，它可以在一种操作系统里面运行另一种操作系统，应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其他部分毫无影响，但是存在几个问题

- 资源占用多，虚拟机会独占一部分内存和硬盘空间

- 冗余步骤多，虚拟机是完整的操作系统

- 启动慢

于是发展出了另一种虚拟化技术：Linux 容器，它不是模拟一个完整的操作系统，而是对进程进行隔离，相比于虚拟机有以下优势

- 启动快，容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的进程

- 资源占用少，容器只占用需要的资源

- 体积小，容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包

#### 概念

Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口，它将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样，主要用途如下

- 提供一次性的环境，如本地测试他人的软件、持续集成的时候提供单元测试和构建的环境

- 提供弹性的云服务，可以随开随关，很适合动态扩容和缩容

- 组建微服务架构，一台机器可以跑多个服务

Docker 中有三个核心概念

- Image：镜像是一种文件存储形式，一个磁盘上的数据在另一个磁盘上存在一个完全相同的副本即为镜像。Docker 把应用程序及其依赖，打包在 image 文件里面，同一个 image 文件可以生成多个同时运行的容器实例

- Container：image 文件生成的容器实例，本身也是一个文件，称为容器文件。容器的存在离不开镜像的支持，他是镜像运行时的一个载体，Docker 给容器创建了独立的端口、进程、文件等“空间”，Container 就是一个与宿机隔离 “容器”，容器可宿主机之间可以进行 port、volumes、network 等的通信

- Repository：类似 git 仓库，在本地构建完镜像之后，即可通过仓库进行镜像的分发。常用的 Docker hub 有 https://hub.docker.com/ 、 https://cr.console.aliyun.com/ 等
